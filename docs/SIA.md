# SIA(Stuck In Active)

대규모 네트워크에서 [[시스코]] [[라우터]]에서 EIGRP [[동적 라우팅 프로토콜]]을 사용할 경우 발생할 수 있는 현상. 

경로를 잃은 라우터가 이웃 장비에게 Query를 보내고 응답을 받기 위해 기다리는 상태를 Active 상태라고 한다.

SIA 현상이란 라우터의 Active 상태가 길어지는 것을 의미한다.

## 해결책 - [참고](https://bignet.tistory.com/67)

SIA 현상 대처 방법



 1. Timer 조정 

  : 응답받을 시간을 더 벌어주는 것뿐이지 궁극적인 해결방식이 아니다. 오히려 이로인해 수렴시간이 느려질 수도 있다.

  1) SIA Timer 조정

: Query가 보내진 후 3분 안에 Reply가 돌아오지 못하면 Neighbor가 끊어지고 다시 Hello를 받으면 Neigbor를 맺는다.

이러한 작업을 반복하게 되면 EIGRP 네트워크를 불안정하게 만들 수 있으니 Reply를 받아야 하는 Hold time을 더 늘리는 방식이다.

<설정 방법>

R(config)# rouer eigrp 1

R(config-router)# timers active-time <제한시간(분)-Default 3분>

 

2) SIA Query 설정

: IOS version 12.1(5) 부터 SIA-Query와 SIA-Reply라는 기능을 사용할 수 있게 되었다.

Query를 보내고 Active Timer의 50% (기본값으론 1분30초)가 경과되면 아직 Reply를 받지 못한 이웃장비에게 SIA-Query를 보내고 이웃장비는 Ack로 응답하여 Reply를 받지 못하여도 이웃장비간 연결을 유지할 수 있도록 한다.

 



 2. Query 확산 네트워크 제한 

  1) 축약 정보로 광고하기

: 축약된 정보로 광고하게되면 이웃장비는 상세네트워크 정보를 받지 못하게 된다. 만일 상세네트워크가 다운이 되어 축약광고를 보냈던 이웃장비에게 Query를 보내면 이웃장비는 상세 정보는 받은적이 없기 때문에 즉시 모른다는 응답을 보내어 Query가 확산되는 것을 막을 수 있다.



  2) Stub 라우터로 설정하기

: Stub이란 특정 정보만 광고하겠다고 설정하는 방식으로 대부분 네트워크 끝쪽에 위치한 라우터가 해당된다. Stub으로 설정된 네트워크로는 Query가 날라가지 않는다.



  3) 재분배

: 재분배된 네트워크는 다른 AS이기 때문에 Query가 날라가지 않는다.





[//begin]: # "Autogenerated link references for markdown compatibility"
[시스코]: 시스코.md "시스코"
[라우터]: 라우터.md "라우터"
[동적 라우팅 프로토콜]: <동적 라우팅 프로토콜.md> "동적 라우팅 프로토콜"
[//end]: # "Autogenerated link references"